# Instructions for batch_fm example #
-------------------------------------

This example demonstrates the use of the combinefm.x executable, which uses the 
intermediate outputs from several runs of the newfm.x executable to determine 
coarse-grained interactions.
The input system is a system of 1000 methanol molecules that have each been mapped
to a single, center-of-mass site. This is similar to the "lammps_fm" and "serial_fm"
example systems.
As with all of the examples, the trajectory is not long enough to contain sufficient 
sampling to produce a converged result.

1) The range files (rmin.in and the empty rmin_b.in) have already been prepared.
   These ranges would have been generated by running the rangefinder.x executable 
   on the original trajectory. 
   Note: the interaction ranges must be the same for all subsequent steps.
   
2) The intermediate results of several force matching runs have been prepared.
   These are the result1.out through result10.files.
   These would have been generated by running the newfm.x executable on a 
   trajectory (similar to the instructions for the "lammps_fm" or "serial_fm"
   examples) with "primary_output_style" in "control.in" set to either 2 or 3.
   
3) The "res_av.in" file listing the number of and names of the intermediate output
   files has already been prepared. It must be prepared manually.
   
4) Run the combinefm.x executable:
./combinefm.x

2) Compare the results with those in the "output" directory.